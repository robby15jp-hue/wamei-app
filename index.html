<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>当て字ジェネレーター | EN / ZH / KO</title>
<style>
  :root{--bg:#fafafa;--card:#fff;--text:#222;--muted:#666;--line:#e5e7eb;--p:#4f46e5}
  *{box-sizing:border-box} body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans JP',sans-serif;background:var(--bg);color:var(--text);margin:0}
  .app{max-width:720px;margin:0 auto;padding:20px}
  h1{font-size:22px;margin:6px 0 14px} p{color:var(--muted);margin:0 0 12px}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  select,input,button{font-size:16px;padding:10px;border:1px solid var(--line);border-radius:10px;background:#fff}
  input{flex:1;min-width:200px}
  button{background:var(--p);color:#fff;border:none}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;margin-top:14px}
  .hit{font-size:20px;line-height:1.2;margin:6px 0}
  .kana{display:inline-block;margin-left:6px;color:var(--muted);font-size:14px}
  .badge{display:inline-block;margin-left:8px;padding:2px 8px;border:1px solid var(--line);border-radius:999px;font-size:12px;color:var(--muted)}
  .copybtn{font-size:12px;padding:6px 8px;margin-left:8px;border:1px solid var(--line);background:#fff;color:#333;border-radius:8px}
  .tips{color:var(--muted);font-size:14px}
  .suggest a{display:inline-block;margin:4px 6px 0 0;padding:6px 10px;border:1px solid var(--line);border-radius:999px;color:#333;text-decoration:none}
  footer{color:var(--muted);font-size:12px;margin-top:20px}
</style>
</head>
<body>
<div class="app">
  <h1>英語・中国語・韓国語の名前 → 当て字変換</h1>
  <p>言語を選んで名前を入力（例：<b>William</b> / <b>Tom</b> / <b>Li</b> / <b>Kim</b> / <b>Milo</b>）。大文字小文字どちらでもOK。</p>

  <div class="row">
    <select id="lang">
      <option value="en">英語 (EN)</option>
      <option value="zh">中国語ローマ字 (ZH pinyin)</option>
      <option value="ko">韓国語ローマ字 (KO)</option>
    </select>
    <input id="q" placeholder="Name (例: William / Tom / Li / Kim)" autocomplete="off">
    <button id="go">変換</button>
  </div>

  <div id="out" class="card"></div>
  <footer>ヒットしない場合は似た候補を表示。辞書は <code>db</code>、別名は <code>aliases</code> に追記。</footer>
</div>

<script>
/* ============ 辞書（全て小文字キー） ============ */
const db = {
  en: {
    // 男性 TOP25（抜粋＋拡張）
    "liam":[["理亜夢","リアム"],["利阿武","リアム"]],
    "noah":[["乃亜","ノア"],["野亜","ノア"]],
    "oliver":[["王利馬亜","オリバー"],["央利葉","オリバー"]],
    "elijah":[["衣来蛇","イライジャ"],["依頼者","イライジャ"]],
    "james":[["寿恵武図","ジェームズ"],["自衛夢寿","ジェームズ"]],
    "william":[["宇井利愛夢","ウィリアム"],["有利亜夢","ウィリアム"]],
    "benjamin":[["弁者民","ベンジャミン"],["勉者民","ベンジャミン"]],
    "lucas":[["流華須","ルーカス"],["留華寿","ルーカス"]],
    "henry":[["辺利","ヘンリー"],["遍理","ヘンリー"]],
    "alexander":[["亜礼久三太","アレクサンダー"],["亜連久三陀","アレクサンダー"]],
    "mason":[["明孫","メイソン"],["盟尊","メイソン"]],
    "michael":[["舞家留","マイケル"],["真伊蹴","マイケル"]],
    "ethan":[["伊参","イーサン"],["慈参","イーサン"]],
    "daniel":[["檀衣流","ダニエル"],["打仁得流","ダニエル"]],
    "jacob":[["寿栄古武","ジェイコブ"],["自栄古武","ジェイコブ"]],
    "logan":[["朗眼","ローガン"],["魯眼","ローガン"]],
    "jackson":[["若久尊","ジャクソン"],["実音尊","ジャクソン"]],
    "levi":[["利倍","リーバイ"],["礼倍","リーバイ"]],
    "sebastian":[["成羽好地案","セバスチャン"],["世抜志庵","セバスチャン"]],
    "mateo":[["真帝王","マテオ"],["魔帝央","マテオ"]],
    "jack":[["若久","ジャック"],["寿悪","ジャック"]],
    "owen":[["王縁","オーウェン"],["桜縁","オーウェン"]],
    "theodore":[["世緒堂","セオドア"],["瀬尾堂","セオドア"]],
    "aiden":[["永伝","エイデン"],["愛伝","エイデン"]],
    "samuel":[["寿美由留","サミュエル"],["佐美憂流","サミュエル"]],
    // 追加：よく使うベース名
    "thomas":[["登真須","トーマス"],["当真志","トーマス"]],
    "tom":[["富夢","トム"]],             // ← 直接対応
    "joseph":[["常世布","ジョセフ"],["譲世布","ジョセフ"]],
    "robert":[["郎倍斗","ロバート"],["路伯斗","ロバート"]],
    "charles":[["茶瑠図","チャールズ"],["茶琉寿","チャールズ"]],
    "anthony":[["安登仁","アンソニー"],["庵蘇仁","アンソニー"]],
    "andrew":[["安導流","アンドリュー"],["案土流","アンドリュー"]],
    "matthew":[["真忠","マシュー"],["待秀","マシュー"]],
    "david":[["大微土","デイビッド"],["大備人","デイビッド"]],
    "john":[["常治","ジョン"],["丈司","ジョン"]],
    "milo":[["魅朗","マイロ"],["美路","マイロ"]],
    // 女性 TOP25（抜粋＋拡張）
    "olivia":[["王利日亜","オリビア"],["央利美亜","オリビア"]],
    "emma":[["絵真","エマ"],["恵舞","エマ"]],
    "amelia":[["亜芽莉亜","アメリア"],["天芽理亜","アメリア"]],
    "ava":[["永羽","エイヴァ"],["愛羽","エイヴァ"]],
    "sophia":[["素麸衣亜","ソフィア"],["素妃亜","ソフィア"]],
    "isabella":[["衣座美良","イザベラ"],["伊座倍羅","イザベラ"]],
    "mia":[["美亜","ミア"],["実愛","ミア"]],
    "evelyn":[["永布鈴","エヴリン"],["恵布琳","エヴリン"]],
    "harper":[["葉波","ハーパー"],["波羽","ハーパー"]],
    "luna":[["瑠奈","ルナ"],["留菜","ルナ"]],
    "camila":[["花美羅","カミラ"],["香美良","カミラ"]],
    "gianna":[["慈安奈","ジアナ"],["自安菜","ジアナ"]],
    "elizabeth":[["栄利座辺寿","エリザベス"],["衣利座美寿","エリザベス"]],
    "eleanor":[["恵麗乃亜","エレノア"],["衣麗野亜","エレノア"]],
    "ella":[["絵良","エラ"],["恵羅","エラ"]],
    "abigail":[["亜美芸流","アビゲイル"],["安美芸留","アビゲイル"]],
    "sofia":[["早妃亜","ソフィア"],["蘇妃亜","ソフィア"]],
    "avery":[["永舞利","エイブリー"],["愛舞理","エイブリー"]],
    "scarlett":[["好華亜烈都","スカーレット"],["紅麗都","スカーレット"]],
    "emily":[["恵美里","エミリー"],["絵美莉","エミリー"]],
    "aria":[["亜莉亜","アリア"],["愛莉亜","アリア"]],
    "chloe":[["久路恵","クロエ"],["黒江","クロエ"]],
    "grace":[["倶麗寿","グレース"],["群麗須","グレース"]],
    "ellie":[["恵莉","エリー"],["絵梨","エリー"]],
    "nora":[["乃良","ノーラ"],["野良","ノーラ"]],
    "katherine":[["佳瑟琳","キャサリン"],["華瑟琳","キャサリン"]]
  },
  zh: { // 中国語（pinyin）
    "li":[["李","リー"],["里","リー"]],
    "wang":[["王","ワン"],["旺","ワン"]],
    "zhang":[["張","ジャン"],["章","ジャン"]],
    "liu":[["劉","リウ"],["流","リウ"]],
    "chen":[["陳","チェン"],["辰","チェン"]],
    "wei":[["偉","ウェイ"],["瑋","ウェイ"]],
    "jun":[["俊","ジュン"],["君","ジュン"]],
    "mei":[["美","メイ"],["梅","メイ"]],
    "ling":[["玲","リン"],["凌","リン"]],
    "xin":[["欣","シン"],["信","シン"]]
  },
  ko: { // 韓国語（ローマ字）
    "kim":[["金","キム"]],
    "lee":[["李","イ / リ"],["異","イ"]],
    "park":[["朴","パク"]],
    "choi":[["崔","チェ"]],
    "jung":[["鄭","チョン"]],
    "kang":[["姜","カン"]],
    "yoon":[["尹","ユン"]],
    "han":[["韓","ハン"]],
    "lim":[["林","イム / リム"]],
    "shin":[["申","シン"]]
  }
};

/* ============ 別名（小文字） ============ */
const aliases = {
  // 男性
  "mike":"michael","mikey":"michael",
  "will":"william","bill":"william","billy":"william",
  "alex":"alexander",
  "tom":"tom","tommy":"thomas",        // Tomは直接ヒット、TommyはThomasへ
  "joe":"joseph","joey":"joseph",
  "bob":"robert","rob":"robert","robby":"robert","bobby":"robert",
  "charlie":"charles","chuck":"charles",
  "matt":"matthew",
  "tony":"anthony",
  "andy":"andrew",
  "dan":"daniel",
  "dave":"david",
  "johnny":"john",
  // 女性
  "liz":"elizabeth","beth":"elizabeth","liza":"elizabeth",
  "bella":"isabella",
  "ellie":"ellie","elly":"eleanor",   // Ellie はそのまま辞書にある
  "kate":"katherine","katie":"katherine","kat":"katherine",
  "abby":"abigail","abi":"abigail","ally":"abigail"
};

/* ============ UIロジック ============ */
const out = document.getElementById('out');
document.getElementById('go').addEventListener('click', convert);
document.getElementById('q').addEventListener('keydown', e => { if (e.key === 'Enter') convert(); });

function normalize(s){ return (s||'').toLowerCase().trim(); }

function convert(){
  const lang = document.getElementById('lang').value;
  const raw  = document.getElementById('q').value;
  let key    = normalize(raw);

  // エイリアス解決
  if (aliases[key]) key = aliases[key];

  // ① 現在の言語で検索
  const dict = db[lang] || {};
  let hit = dict[key];
  let source = lang;

  // ② 無ければ他言語にもフォールバック（Li を ENで入れてもヒットさせる）
  if (!hit){
    for (const alt of Object.keys(db)){
      if (alt===lang) continue;
      if (db[alt][key]){ hit = db[alt][key]; source = alt; break; }
    }
  }

  if (hit){
    out.innerHTML = renderHits(raw, hit, source);
    return;
  }

  // ③ サジェスト（現在の言語で部分一致）
  const cand = Object.keys(dict).filter(k => k.includes(key)).slice(0,8);
  out.innerHTML = `
    <div class="tips">まだ当て字が登録されていません。</div>
    ${cand.length ? `<div class="suggest"><div class="tips" style="margin-top:8px">もしかして：</div>${cand.map(k=>`<a href="#" onclick="fill('${k}');return false;">${k}</a>`).join('')}</div>` : ''}`;
}

function renderHits(name, items, source){
  const label = source==='en' ? 'EN' : source==='zh' ? 'ZH' : 'KO';
  const title = `<div class="tips">「${escapeHtml(name)}」の候補 <span class="badge">${label}</span></div>`;
  const list = items.map(([kanji, kana]) => `
    <div class="hit">${kanji} <span class="kana">（${kana}）</span>
      <button class="copybtn" onclick="copyText('${kanji}（${kana}）')">コピー</button>
    </div>`).join('');
  return title + list;
}

function copyText(t){ navigator.clipboard?.writeText(t); }
function fill(name){ document.getElementById('q').value = name; convert(); }
function escapeHtml(s){ return s.replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;', "'":'&#39;' }[c])); }
</script>
</body>
</html>
