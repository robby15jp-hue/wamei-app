<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>å½“ã¦å­—ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ | English â†’ Kanji</title>
<style>
  :root{--bg:#fafafa;--card:#fff;--text:#222;--muted:#666;--line:#e5e7eb;--p:#4f46e5}
  *{box-sizing:border-box}
  body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans JP',sans-serif;background:var(--bg);color:var(--text);margin:0}
  .app{max-width:940px;margin:0 auto;padding:20px}
  h1{font-size:22px;margin:6px 0 14px}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:6px 0}
  input,button{font-size:16px;padding:10px;border:1px solid var(--line);border-radius:10px;background:#fff}
  input{flex:1;min-width:280px}
  button{background:var(--p);color:#fff;border:none;cursor:pointer}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;margin-top:14px}
  .hit{font-size:22px;line-height:1.25;margin:8px 0}
  .kana{margin-left:6px;color:#666;font-size:14px}
  .copybtn{font-size:12px;padding:6px 8px;margin-left:8px;border:1px solid var(--line);background:#fff;color:#333;border-radius:8px;cursor:pointer}
  .tips{color:#666;font-size:14px}
  .desc-foreign{color:#2563eb;font-weight:bold;margin:6px 0 2px}
  .desc-jp{color:#555;margin:0 0 8px}
  .badge{display:inline-block;margin-left:8px;padding:2px 8px;border:1px solid var(--line);border-radius:999px;font-size:12px;color:#666}
  .suggest a{display:inline-block;margin:4px 6px 0 0;padding:6px 10px;border:1px solid var(--line);border-radius:999px;color:#333;text-decoration:none}
  hr.sep{border:none;border-top:1px solid var(--line);margin:12px 0}
  footer{color:#777;font-size:12px;margin-top:18px}
</style>
</head>
<body>
<div class="app">
  <h1>è‹±èªåï¼å§“ â†’ å½“ã¦å­—å¤‰æ›</h1>
  <p class="desc-foreign">ğŸŒ Enter an English first/last name (ex: William, Tom, Bill Gates). Case-insensitive.</p>
  <p class="desc-jp">è‹±èªã®åå‰ã¾ãŸã¯å§“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šã‚¦ã‚£ãƒªã‚¢ãƒ ï¼ãƒˆãƒ ï¼Bill Gatesï¼‰ã€‚å¤§æ–‡å­—å°æ–‡å­—ã¯åŒºåˆ¥ã—ã¾ã›ã‚“ã€‚</p>

  <div class="row">
    <input id="q" placeholder="Name / Full name (ex: William / Tom / Bill Gates)" autocomplete="off">
    <button id="go">å¤‰æ›</button>
  </div>

  <div id="out" class="card">æº–å‚™OKã€‚William / Tom / Mike / Bill / Ken / Kent / â€œBill Gatesâ€ ãªã©ã§ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚</div>
  <footer>è¾æ›¸ã¯ <code>db</code>ã€åˆ¥åã¯ <code>aliases</code> ã«è¿½è¨˜ã€‚ãƒ•ãƒ«ãƒãƒ¼ãƒ ã¯æœ€å¤§8èªã¾ã§å‡¦ç†ã€‚</footer>
</div>

<script>
/* ============= ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ============= */
const norm = s => (s||'').toLowerCase().trim();
function escapeHtml(s){return (s+"").replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));}
function copyText(t){navigator.clipboard?.writeText(t);}
const out = document.getElementById('out');
document.getElementById('go').addEventListener('click', convert);
document.getElementById('q').addEventListener('keydown', e=>{ if(e.key==='Enter') convert(); });

/* ============= ç„¡è¦–èªãƒªã‚¹ãƒˆï¼ˆJr., Mr., IIIâ€¦ï¼‰ ============= */
const STOPWORDS = new Set([
  "jr","sr","ii","iii","iv","v","vi",
  "mr","mrs","ms","dr","prof",
  "de","del","della","du","des","la","le","les","da","das","dos","di",
  "van","von","der","den","ter","ten","op","af","al","bin","ibn","ben",
  "the","and","of"
]);
function tokenize(raw){
  let s = (raw||"").replace(/\u3000/g," ").replace(/\s+/g," ").trim();
  s = s.replace(/[^A-Za-z\s]/g," ");
  let parts = s.split(/\s+/).filter(Boolean);
  return parts.filter(w=>!STOPWORDS.has(w.toLowerCase()));
}

/* ============= å½“ã¦å­—ãƒ‡ãƒ¼ã‚¿ ============= */
const db = {
  "william":{variants:[["å®‡äº•åˆ©æ„›å¤¢","ã‚¦ã‚£ãƒªã‚¢ãƒ "]],desc:{foreign:"ğŸŒ Germanic; â€œresolute protector.â€",extra:"âœ¦ Borne by many kings.",jp:"æ—¥æœ¬èª: å¼·ã„å®ˆè­·è€…ã€‚ç‹ä¾¯åã¨ã—ã¦è‘—åã€‚"}},
  "tom":{variants:[["å¯Œå¤¢","ãƒˆãƒ "]],desc:{foreign:"ğŸŒ Short form of Thomas; also independent.",extra:"âœ¦ Friendly, global.",jp:"æ—¥æœ¬èª: ãƒˆãƒ¼ãƒã‚¹ã®çŸ­ç¸®ã ãŒç‹¬ç«‹åã¨ã—ã¦ã‚‚æ™®åŠã€‚"}},
  "bill":{variants:[["ç¾ç•™","ãƒ“ãƒ«"]],desc:{foreign:"ğŸŒ Nickname of William; also standalone.",extra:"âœ¦ Very common US/UK.",jp:"æ—¥æœ¬èª: Williamã®æ„›ç§°ã€‚å˜ä½“åã¨ã—ã¦ã‚‚ä½¿ç”¨ã€‚"}},
  "kenneth":{variants:[["å¥å¥ˆé ˆ","ã‚±ãƒã‚¹"]],desc:{foreign:"ğŸŒ English/Scottish given name.",extra:"âœ¦ Often shortened to Ken.",jp:"æ—¥æœ¬èª: è‹±èª/ã‚¹ã‚³ãƒƒãƒˆãƒ©ãƒ³ãƒ‰ç³»ã€‚"}},
  "ken":{variants:[["å¥","ã‚±ãƒ³"]],desc:{foreign:"ğŸŒ Short form of Kenneth; independent too.",extra:"âœ¦ Crisp, international.",jp:"æ—¥æœ¬èª: Kennethã®çŸ­ç¸®ã€‚ç‹¬ç«‹åã¨ã—ã¦ã‚‚ä¸€èˆ¬çš„ã€‚"}},
  "kent":{variants:[["å¥æ–—","ã‚±ãƒ³ãƒˆ"]],desc:{foreign:"ğŸŒ Given name/surname; also UK county.",extra:"âœ¦ Modern, brisk.",jp:"æ—¥æœ¬èª: å/å§“ä¸¡æ–¹ã«ã‚ã‚‹ã€‚è»½å¿«ã€‚"}},
  "steve":{variants:[["æ¨å¨","ã‚¹ãƒ†ã‚£ãƒ¼ãƒ–"]],desc:{foreign:"ğŸŒ Short form of Steven/Stephen.",extra:"âœ¦ Friendly impression.",jp:"æ—¥æœ¬èª: Stevenã®æ„›ç§°ã€‚è¦ªã—ã¿ã‚„ã™ã„ã€‚"}},
  "john":{variants:[["å¸¸æ²»","ã‚¸ãƒ§ãƒ³"]],desc:{foreign:"ğŸŒ Hebrew; â€œGod is gracious.â€",extra:"âœ¦ Foundational classic.",jp:"æ—¥æœ¬èª: ä¼çµ±çš„å¤å…¸åã€‚è‘—åäººå¤šæ•°ã€‚"}},
  "mike":{variants:[["èˆå®¶ç•™","ãƒã‚¤ã‚¯"]],desc:{foreign:"ğŸŒ Nickname of Michael.",extra:"âœ¦ Casual tone.",jp:"æ—¥æœ¬èª: Michaelã®æ„›ç§°ã€‚"}},
  "charles":{variants:[["èŒ¶ç‘ å›³","ãƒãƒ£ãƒ¼ãƒ«ã‚º"]],desc:{foreign:"ğŸŒ Germanic; â€œfree man.â€",extra:"âœ¦ Regal name.",jp:"æ—¥æœ¬èª: è‡ªç”±äººã®æ„ã€‚"}},
  "elizabeth":{variants:[["æ „åˆ©åº§è¾ºå¯¿","ã‚¨ãƒªã‚¶ãƒ™ã‚¹"]],desc:{foreign:"ğŸŒ â€œpledged to God.â€",extra:"âœ¦ Many nicknames.",jp:"æ—¥æœ¬èª: ç¥ã«æ§ã’ã‚‰ã‚ŒãŸã€‚æ„›ç§°å¤šæ•°ã€‚"}},
  "sophia":{variants:[["ç´ éº¸è¡£äºœ","ã‚½ãƒ•ã‚£ã‚¢"]],desc:{foreign:"ğŸŒ Greek; â€œwisdom.â€",extra:"âœ¦ Global popularity.",jp:"æ—¥æœ¬èª: çŸ¥æµã®æ„ã€‚"}},
  "scarlett":{variants:[["å¥½è¯äºœçƒˆéƒ½","ã‚¹ã‚«ãƒ¼ãƒ¬ãƒƒãƒˆ"]],desc:{foreign:"ğŸŒ Word-name (red).",extra:"âœ¦ Glamorous.",jp:"æ—¥æœ¬èª: æ·±ç´…ã‚’æŒ‡ã™ã€‚è¯ã‚„ã‹ã€‚"}},
  "gates":{variants:[["èŠ¸æ´¥","ã‚²ã‚¤ãƒ„"]],desc:{foreign:"ğŸŒ English surname.",extra:"âœ¦ Known via Bill Gates.",jp:"æ—¥æœ¬èª: è‹±èªã®å§“ã€‚ãƒ“ãƒ«ãƒ»ã‚²ã‚¤ãƒ„ã§è‘—åã€‚"}},
  "smith":{variants:[["å¯¿è¦‹é…¢","ã‚¹ãƒŸã‚¹"]],desc:{foreign:"ğŸŒ Occupational surname.",extra:"âœ¦ Most common in US/UK.",jp:"æ—¥æœ¬èª: é›å†¶å±‹ç”±æ¥ã€‚"}},
  "johnson":{variants:[["å®ŸéŸ³å°Š","ã‚¸ãƒ§ãƒ³ã‚½ãƒ³"]],desc:{foreign:"ğŸŒ â€œson of John.â€",extra:"âœ¦ Very common surname.",jp:"æ—¥æœ¬èª: Johnã®å­ã€‚"}}
};

/* ============= ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ å¯¾å¿œï¼‰ ============= */
const aliases = {
  "will":"william","willy":"william","billy":"bill",
  "steven":"steve","stephen":"steve",
  "tommy":"tom","thomas":"tom",
  "mikey":"mike",
  "charlie":"charles","chuck":"charles",
  "liz":"elizabeth","beth":"elizabeth",
  "sophie":"sophia","sofia":"sophia",
  "kenny":"kenneth"
};

/* ============= æœ¬ä½“å‡¦ç† ============= */
function convert(){
  const raw = document.getElementById('q').value||"";
  const parts = tokenize(raw);
  if(!parts.length){ out.textContent="åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"; return; }

  const MAX_TOKENS=8;
  const capped=parts.slice(0,MAX_TOKENS);
  const truncated=parts.length>MAX_TOKENS?parts.length-MAX_TOKENS:0;

  const blocks=capped.map(token=>lookupOne(token));
  const html=blocks.map((r,i)=>(i?'<hr class="sep">':'')+r.html).join('');
  out.innerHTML=html+(truncated?`<div class="tips">â€» é•·æ–‡ã®ãŸã‚å…ˆé ­${MAX_TOKENS}èªã®ã¿å‡¦ç†ï¼ˆæ®‹ã‚Š${truncated}èªï¼‰ã€‚çŸ­ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</div>`:"");
}

function lookupOne(token){
  const keyOriginal=token;
  let key=norm(token);
  if(aliases[keyOriginal.toLowerCase()]) key=norm(aliases[keyOriginal.toLowerCase()]);
  if(aliases[key]) key=norm(aliases[key]);

  const data=db[key];
  if(data){ return {hit:true,html:render(keyOriginal,data)}; }

  const cand=Object.keys(db).filter(k=>k.includes(key)).slice(0,8);
  const suggestHtml=`<div class="tips">ã€Œ${escapeHtml(keyOriginal)}ã€ã¯ã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</div>${
    cand.length?`<div class="suggest"><div class="tips">ã‚‚ã—ã‹ã—ã¦ï¼š</div>${cand.map(k=>`<a href="#" onclick="fill('${k}');return false;">${k}</a>`).join('')}</div>`:''}`;
  return {hit:false,html:suggestHtml};
}

function render(name,data){
  const list=data.variants.map(([k,ka])=>
    `<div class="hit">${k} <span class="kana">ï¼ˆ${ka}ï¼‰</span>
      <button class="copybtn" onclick="copyText('${k}ï¼ˆ${ka}ï¼‰')">ã‚³ãƒ”ãƒ¼</button></div>`).join('');
  return `<div class="tips">ã€Œ${escapeHtml(name)}ã€ã®å€™è£œ <span class="badge">EN</span></div>
          ${list}
          <div class="desc-foreign">${data.desc.foreign}</div>
          <div class="tips">${data.desc.extra}</div>
          <div class="desc-jp">${data.desc.jp}</div>`;
}
function fill(name){document.getElementById('q').value=name;convert();}
</script>
</body>
</html>
