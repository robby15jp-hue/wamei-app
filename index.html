<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Wamei — Kanji Atoji Maker with Meanings</title>
<style>
  :root{
    --bg:#0f1224; --card:#121735; --ink:#e8ebff; --muted:#9aa3ff;
    --a:#6c8bff; --b:#9f7aff; --r:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;min-height:100dvh;color:var(--ink);
    font:16px/1.6 -apple-system,system-ui,Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background:
      radial-gradient(1200px 600px at 70% -20%,#2631a0 0%,transparent 60%),
      radial-gradient(900px 600px at -10% 110%,#7928ca 0%,transparent 55%),
      #0f1224;
    display:grid;place-items:center;padding:28px;
  }
  .card{
    width:min(900px,100%);padding:28px;border-radius:var(--r);
    background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(8px);
    box-shadow:0 10px 40px rgba(0,0,0,.35);
  }
  h1{margin:0 0 10px;font-size:clamp(22px,3vw,30px)}
  p.lead{margin:0 0 18px;color:var(--muted)}
  .row{display:flex;gap:14px;flex-wrap:wrap;margin:16px 0}
  input{
    flex:1 1 260px;min-width:220px;font:600 16px/1.2 inherit;color:var(--ink);
    padding:14px 16px;background:#0e1430;border:1px solid rgba(255,255,255,.12);
    border-radius:12px
  }
  button{
    appearance:none;border:0;cursor:pointer;white-space:nowrap;
    padding:14px 18px;border-radius:14px;font-weight:700;letter-spacing:.3px;
    color:#0b0f1e;background:linear-gradient(135deg,var(--a),var(--b));
    box-shadow:0 6px 16px rgba(108,139,255,.45)
  }
  .result{margin-top:18px}
  .kanji{
    font-size:clamp(52px,8vw,92px);font-weight:800;
    padding:10px 18px;border-radius:16px;
    background:linear-gradient(180deg,#fff,#e9edff);color:#0c1030;
    letter-spacing:.08em;box-shadow:inset 0 1px 0 rgba(255,255,255,.6)
  }
  .note{margin-top:8px;color:var(--muted);font-weight:600}
  #meaning{margin-top:10px;color:#ffd480;font-size:15px;line-height:1.4}
  footer{margin-top:14px;color:#8d97ff;font-size:12px}
</style>
</head>
<body>
<main class="card">
  <h1>Wamei — Kanji Atoji Maker</h1>
  <p class="lead">Enter a name (Latin or Katakana). We generate readable kanji and meanings.</p>
  <div class="row">
    <input id="name" placeholder="Name (e.g., Mike / ケイト / Tommy)">
    <button id="convert">Generate</button>
  </div>

  <section class="result" id="result" hidden>
    <div class="kanji" id="kanji">—</div>
    <div class="note" id="kana">kana: —</div>
    <div id="meaning"></div>
  </section>

  <footer>Deterministic per name. Meanings grow over time. Client-only.</footer>
</main>

<script>
/* --- utilities --- */
function xmur3(str){let h=1779033703^str.length;for(let i=0;i<str.length;i++){h=Math.imul(h^str.charCodeAt(i),3432918353);h=(h<<13)|(h>>>19)}
return()=>{h=Math.imul(h^(h>>>16),2246822507);h=Math.imul(h^(h>>>13),3266489909);return(h^=h>>>16)>>>0}}
const toKatakana=s=>s.replace(/[ぁ-ん]/g,ch=>String.fromCharCode(ch.charCodeAt(0)+0x60));

/* Roman→Katakana (超簡易版) */
function romanToKana(str){
  let s=(str||"").toLowerCase().replace(/[^a-z]/g,"");
  if(!s) return "";
  if(s==="mike") return "マイク";
  if(s==="tommy") return "トミー";
  if(s==="kate") return "ケイト";
  return "ユーザー"; // fallback
}

/* Atoji dictionary */
const ATOJI={
  "マ":["真","麻","舞","摩"],
  "イ":["依","伊","以","維"],
  "ク":["郁","育","久"],
  "ケイ":["啓","圭","慶","桂","景"],
  "ト":["斗","人","登","都","杜"],
  "ミ":["美","巳","実","海","三"],
  "ン":[""], "ー":[""], "ッ":[""]
};

/* 意味辞書（必要に応じて増やせる） */
const MEANINGS={
  "真":"true / genuine",
  "麻":"hemp / linen",
  "舞":"dance",
  "摩":"rub / polish",
  "依":"rely / depend",
  "伊":"Italy / that one",
  "以":"by means of",
  "維":"maintain",
  "郁":"fragrance / cultural",
  "育":"nurture / grow",
  "久":"long time",
  "啓":"enlighten / guide",
  "圭":"jade / balance",
  "慶":"celebration",
  "桂":"cinnamon / laurel",
  "景":"scenery",
  "斗":"Big Dipper / measure",
  "人":"person",
  "登":"ascend / register",
  "都":"capital",
  "杜":"woods",
  "美":"beauty",
  "巳":"zodiac snake",
  "実":"truth / fruit",
  "海":"sea",
  "三":"three"
};

/* tokenize */
function tokenizeKana(kana){
  if(kana.startsWith("ケイ")) return ["ケイ",...kana.slice(2).split("")];
  return kana.split("");
}

/* deterministic atoji */
function atojiFrom(kana){
  const seed=kana.toUpperCase(),rnd=xmur3(seed);
  const tokens=tokenizeKana(kana);
  let out=[];
  for(const t of tokens){
    const cand=ATOJI[t]||["雅","瑞","礼"];
    out.push(cand[rnd()%cand.length]);
  }
  if(out.length>=4){
    const keep=2+(rnd()%2);
    const stride=Math.max(1,Math.floor(out.length/keep));
    const compact=[];for(let i=0;i<keep;i++){compact.push(out[i*stride]);}
    out=compact;
  }
  return out.join("");
}

/* meaning lookup */
function showMeaning(kanji){
  let arr=[];
  for(const ch of kanji){
    if(MEANINGS[ch]) arr.push(`${ch} = ${MEANINGS[ch]}`);
  }
  return arr.join("<br>");
}

/* UI */
const nameI=document.getElementById("name"),btn=document.getElementById("convert");
const res=document.getElementById("result"),kanjiEl=document.getElementById("kanji"),kanaEl=document.getElementById("kana"),meaningEl=document.getElementById("meaning");

function run(){
  let v=(nameI.value||"").trim();if(!v){res.hidden=false;kanjiEl.textContent="—";kanaEl.textContent="kana: —";meaningEl.textContent="";return;}
  let kana=/[A-Za-z]/.test(v)?romanToKana(v):toKatakana(v);
  const kanji=atojiFrom(kana);
  kanjiEl.textContent=kanji;
  kanaEl.textContent="kana: "+kana;
  meaningEl.innerHTML=showMeaning(kanji);
  res.hidden=false;
}
btn.addEventListener("click",run);
nameI.addEventListener("keydown",e=>{if(e.key==="Enter")run()});
</script>
</body>
</html>
