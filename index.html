<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WAMEI â€” Kanji Atoji (Hybrid)</title>
<meta name="description" content="Enter a name. We return readable Japanese Kanji with positive meanings. Dictionary-first, phonetic fallback. Deterministic." />
<style>
  :root{--bg:#0b1020;--card:#151a33;--text:#e9ecff;--muted:#9aa3ff;--pri:#7c6cff;--acc:#4ecdc4;--gold:#ffd166}
  *{box-sizing:border-box} body{margin:0;background:radial-gradient(1200px 600px at 70% -20%,#222a7f00 0,#222a7f000 60%),var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;min-height:100svh;display:grid;place-items:center;padding:24px}
  .app{width:min(960px,100%);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.12);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.35);overflow:hidden}
  header{padding:40px 28px;background:linear-gradient(135deg,#6b5cff,#9d71ff)}
  h1{margin:0;font-size:clamp(28px,5vw,40px)} .sub{opacity:.9;margin-top:6px}
  main{padding:28px}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  input{flex:1;min-width:240px;background:#1b2246;border:2px solid #2a316a;border-radius:12px;padding:16px 18px;color:var(--text);font-size:16px}
  input:focus{outline:none;border-color:var(--pri)}
  button{border:0;border-radius:12px;padding:16px 22px;font-weight:700;background:linear-gradient(135deg,var(--pri),#9d71ff);color:white;cursor:pointer}
  .card{margin-top:20px;background:var(--card);border:1px solid #222a55;border-radius:16px;padding:22px}
  .kanji{font-size:clamp(64px,16vw,140px);line-height:1;margin:6px 0 2px;background:linear-gradient(135deg,#fff,#d9ddff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 10px 20px rgba(0,0,0,.35));text-align:center}
  .kana{text-align:center;color:var(--muted);font-weight:600}
  .meaning{margin-top:18px;background:linear-gradient(135deg,rgba(255,209,102,.18),rgba(255,209,102,.06));border-left:4px solid var(--gold);padding:14px;border-radius:12px}
  .chips{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
  .chip{padding:8px 12px;border-radius:999px;background:#202652;border:1px solid #2b3472;cursor:pointer}
  .muted{color:var(--muted)}
</style>
</head>
<body>
<div class="app">
  <header>
    <h1>WAMEI â€” Kanji Atoji</h1>
    <div class="sub">Dictionary-first. Phonetic fallback with positive meanings. Deterministic per name.</div>
  </header>
  <main>
    <div class="row">
      <input id="name" placeholder="Enter a name (Tom, Kate, Kevin, Davidâ€¦)" maxlength="30" />
      <button id="go">âœ¨ Generate</button>
    </div>

    <div class="card" id="out" style="display:none">
      <div class="kanji" id="kanji">â€”</div>
      <div class="kana" id="kana">â€”</div>
      <div class="meaning" id="meanings">â€”</div>
      <div class="chips">
        <span class="chip" id="copyBtn">ğŸ“‹ Copy</span>
        <span class="chip" id="shareBtn">ğŸ”— Share</span>
      </div>
    </div>

    <div class="card">
      <div class="muted">Try:</div>
      <div class="chips" id="examples"></div>
    </div>
  </main>
</div>

<script>
/* ===== 1) Dictionary (50+)  ===== */
const dict = {
  "mike": ["èˆæµ","ã¾ã„ã‘","mai-ke","èˆ=to dance; æµ=blessing"],
  "tom": ["æ™ºå‹","ã¨ã‚‚","to-mo","æ™º=wisdom; å‹=friend"],
  "tommy": ["æ™ºå·³","ã¨ã¿","to-mi","æ™º=wisdom; å·³=sign of snake (tenacity)"],
  "kate": ["ä½³éŸ³","ã‘ã„ã¨","ke-i-to","ä½³=excellent; éŸ³=sound"],
  "kevin": ["æµç¿”","ã‘ã³ã‚“","ke-bin","æµ=blessing; ç¿”=soar"],
  "ken": ["å¥","ã‘ã‚“","ke-n","å¥=healthy"],
  "john": ["åŸå®‰","ã˜ã‚‡ã†ã‚“","jo-n","åŸ=castle; å®‰=peace"],
  "jane": ["æ…ˆéŸ³","ã˜ã‡ã„ã‚“","je-in","æ…ˆ=kindness; éŸ³=sound"],
  "david": ["å¤§è¼","ã§ã„ã³ã£ã©","de-i-bi-d","å¤§=great; è¼=shine"],
  "alex": ["æ˜ç¤¼","ã‚ã‚Œã£ãã™","a-re-ku-su","æ˜=bright; ç¤¼=courtesy"],
  "emma": ["æµçœŸ","ãˆã¾","e-ma","æµ=blessing; çœŸ=true"],
  "anna": ["æå¥ˆ","ã‚ã‚“ãª","an-na","æ=apricot (warm); å¥ˆ=grace"],
  "lisa": ["è‰å’²","ã‚Šã•","ri-sa","è‰=jasmine; å’²=bloom"],
  "sarah": ["å’²è‰¯","ã•ã‚‰","sa-ra","å’²=bloom; è‰¯=good"],
  "maria": ["çœŸç†æ„›","ã¾ã‚Šã‚","ma-ri-a","çœŸç†=truth; æ„›=love"],
  "peter": ["å¹³ç¿”","ãºãŸãƒ¼","pe-ta","å¹³=peace; ç¿”=soar"],
  "pierre": ["å…‰ç¤¼","ã´ãˆãƒ¼ã‚‹","pi-e-ru","å…‰=light; ç¤¼=courtesy"],
  "oliver": ["ç¹”æ™´","ãŠã‚Šã°ãƒ¼","o-ri-ba","ç¹”=weave; æ™´=clear"],
  "lucas": ["æµä½³","ã‚‹ãƒ¼ã‹ã™","ru-ka-su","æµ=flow; ä½³=excellent"],
  "noah": ["æœ›é™½","ã®ã‚","no-a","æœ›=hope; é™½=sun"],
  "ethan": ["æ „ç«¯","ã„ãƒ¼ã•ã‚“","e-san","æ „=glory; ç«¯=begin"],
  "liam": ["ç†å¤©","ã‚Šã‚ã‚€","ri-a-mu","ç†=reason; å¤©=sky"],
  "william": ["å’Œç¤¼","ã†ãƒã‚Šã‚ã‚€","wi-ri-a-mu","å’Œ=harmony; ç¤¼=courtesy"],
  "george": ["è­²æ²»","ã˜ã‚‡ãƒ¼ã˜","jo-ji","è­²=yield (kind); æ²»=govern (calm)"],
  "charles": ["æ™ºæµ","ã¡ã‚ƒãƒ¼ã‚‹ãš","cha-ru-zu","æ™º=wisdom; æµ=flow"],
  "harry": ["æ™´é‡Œ","ã¯ã‚Šãƒ¼","ha-ri","æ™´=clear; é‡Œ=village (home)"],
  "jack": ["æ…ˆé§†","ã˜ã‚ƒã£ã","ja-kku","æ…ˆ=mercy; é§†=drive"],
  "jacob": ["æ…ˆå…‰","ã˜ã‡ã„ã“ã¶","je-ko-bu","æ…ˆ=kindness; å…‰=light"],
  "daniel": ["æš–æ „","ã ã«ãˆã‚‹","da-nie-ru","æš–=warm; æ „=glory"],
  "james": ["ä»æ˜","ã˜ã‡ã„ã‚€ãš","je-mu-zu","ä»=humanity; æ˜=bright"],
  "matthew": ["çœŸç¿”","ã¾ã—ã‚…ãƒ¼","ma-shu","çœŸ=true; ç¿”=soar"],
  "anthony": ["å®‰ç™»ä»","ã‚ã‚“ãã«ãƒ¼","an-so-ni","å®‰=peace; ç™»=rise; ä»=humanity"],
  "andrew": ["å®‰æµ","ã‚ã‚“ã©ã‚Šã‚…ãƒ¼","an-ryu","å®‰=peace; æµ=flow"],
  "christopher": ["è¼äºº","ãã‚Šã™ã¨ãµããƒ¼","ku-ri-su-to","è¼=shine; äºº=person"],
  "benjamin": ["å¼ä»ç¾","ã¹ã‚“ã˜ã‚ƒã¿ã‚“","ben-ja-min","å¼=eloquence; ä»=kind; ç¾=beauty"],
  "steven": ["æ˜Ÿå¤©","ã™ã¦ãƒãƒ¼ã¶ã‚“","su-ti-bun","æ˜Ÿ=star; å¤©=sky"],
  "keith": ["æµå¿—","ã‘ã„ã™","kei-su","æµ=blessing; å¿—=will"],
  "ryan": ["å‡Œå®‰","ã‚Šã‚ã‚“","ri-an","å‡Œ=rise; å®‰=peace"],
  "eric": ["æ „é™¸","ãˆã‚Šã£ã","e-rik","æ „=glory; é™¸=land"],
  "robert": ["æœ—ä¼¯","ã‚ã°ãƒ¼ã¨","ro-ba-to","æœ—=clear; ä¼¯=leader"],
  "richard": ["ç†ç¿”","ã‚Šã¡ã‚ƒãƒ¼ã©","ri-cha-do","ç†=reason; ç¿”=soar"],
  "henry": ["è³¢ç¤¼","ã¸ã‚“ã‚Šãƒ¼","hen-ri","è³¢=wise; ç¤¼=courtesy"],
  "victor": ["ç¿¼ç™»","ã³ããŸãƒ¼","bi-ku-ta","ç¿¼=wing; ç™»=rise"],
  "keira": ["æµè‰¯","ã‘ã„ã‚‰","kei-ra","æµ=blessing; è‰¯=good"],
  "olivia": ["ç¹”ç¾å’Œ","ãŠã‚Šã³ã‚","o-ri-bi-a","ç¹”=weave; ç¾=beauty; å’Œ=harmony"],
  "sofia": ["è’¼ç·‹æ„›","ããµãƒã‚","so-fi-a","è’¼=blue; ç·‹=scarlet; æ„›=love"],
  "emily": ["ç¬‘ç¾é‡Œ","ãˆã¿ã‚Šãƒ¼","e-mi-ri","ç¬‘=smile; ç¾=beauty; é‡Œ=home"],
  "grace": ["é›…è–","ãã‚Œã„ã™","gu-re-is","é›…=elegant; è–=holy"],
  "natalie": ["èœå¤šè‰","ãªãŸã‚Šãƒ¼","na-ta-ri","èœ=green; å¤š=many; è‰=jasmine"],
  "isabella": ["æ³‰ç¾è‰¯","ã„ã–ã¹ã‚‰","i-za-be-ra","æ³‰=spring; ç¾=beauty; è‰¯=good"]
};

/* ===== 2) Romaji â†’ Katakana (very small, name-safe) ===== */
const romajiMap = [
  ["kyo","ã‚­ãƒ§"],["kya","ã‚­ãƒ£"],["kyu","ã‚­ãƒ¥"],
  ["sho","ã‚·ãƒ§"],["sha","ã‚·ãƒ£"],["shu","ã‚·ãƒ¥"],
  ["cho","ãƒãƒ§"],["cha","ãƒãƒ£"],["chu","ãƒãƒ¥"],
  ["ryo","ãƒªãƒ§"],["rya","ãƒªãƒ£"],["ryu","ãƒªãƒ¥"],
  ["jyo","ã‚¸ãƒ§"],["ja","ã‚¸ãƒ£"],["ju","ã‚¸ãƒ¥"],["jo","ã‚¸ãƒ§"],
  ["tsu","ãƒ„"],["shi","ã‚·"],["chi","ãƒ"],["fu","ãƒ•"],
  ["aa","ã‚¢ãƒ¼"],["ee","ã‚¤ãƒ¼"],["ii","ã‚¤ãƒ¼"],["oo","ã‚ªãƒ¼"],["uu","ã‚¦ãƒ¼"]
];
function toKatakana(s){
  s=s.toLowerCase().replace(/[^a-z]/g,"");
  for(const [r,k] of romajiMap) s=s.replaceAll(r,k);
  // basic consonant+vowel
  const cv = {a:"ã‚¢",i:"ã‚¤",u:"ã‚¦",e:"ã‚¨",o:"ã‚ª"};
  const c = {k:"ã‚«",s:"ã‚µ",t:"ã‚¿",n:"ãƒŠ",h:"ãƒ",m:"ãƒ",y:"ãƒ¤",r:"ãƒ©",w:"ãƒ¯",g:"ã‚¬",z:"ã‚¶",d:"ãƒ€",b:"ãƒ",p:"ãƒ‘",j:"ã‚¸ãƒ£"};
  let out="", i=0;
  while(i<s.length){
    if(/[ã‚¢-ãƒ³ãƒ¼]/.test(s[i])){ out+=s[i++]; continue; }
    const ch=s[i], nx=s[i+1];
    if(c[ch] && cv[nx]){ out+=c[ch].replace("ã‚¢",cv[nx]); i+=2; continue; }
    if(cv[ch]){ out+=cv[ch]; i++; continue; }
    i++; // skip unknown
  }
  return out || "ãƒ¦ãƒ¼ã‚¶ãƒ¼";
}

/* ===== 3) Phonetic syllable â†’ positive Kanji pool ===== */
const sylPool = {
  "ã‚¢":["æ„›","æ—­","æ˜"], "ã‚¤":["æ³‰","é™½","ä¸€"], "ã‚¦":["ç¾½","å®‡","å„ª"],
  "ã‚¨":["æ „","æµ","è‹±"], "ã‚ª":["æ¡œ","æ—º","éŸ³"],
  "ã‚«":["ä½³","å˜‰","é¦™"], "ã‚­":["è¼","å¸Œ","å‰"], "ã‚¯":["ç©º","ä¹…","åŠŸ"],
  "ã‚±":["æµ","æ™¯","æ…¶"], "ã‚³":["å…‰","æ¹–","å¹¸"],
  "ã‚µ":["å’²","ç´—","å½©"], "ã‚·":["å¿—","è©©","ç´«"], "ã‚¹":["æ¾„","æ –","å‘¨"],
  "ã‚»":["è–","æ™´","ä¸–"], "ã‚½":["è’¼","çˆ½","å¥"],
  "ã‚¿":["å¤ª","é”","æ‹“"], "ãƒ":["æ™º","åƒ","æ²»"], "ãƒ„":["ç¿¼","æ´¥","é¼“"],
  "ãƒ†":["å¤©","ç…§","ç¦"], "ãƒˆ":["ç™»","æ–—","ç¿”"],
  "ãƒŠ":["å¥ˆ","èœ","å’Œ"], "ãƒ‹":["ä»","è™¹","æ–°"], "ãƒŒ":["ç¸«","æ¸©"],
  "ãƒ":["éŸ³","å¯§"], "ãƒ":["æœ›","é‡"],
  "ãƒ":["æ³¢","è‘‰","æ™´"], "ãƒ’":["é™½","é£›","å§«"], "ãƒ•":["é¢¨","å¯Œ","ç¦"],
  "ãƒ˜":["ç¢§","è¾º"], "ãƒ›":["ç©‚","å®","èŠ³"],
  "ãƒ":["çœŸ","èˆ","ä¸‡"], "ãƒŸ":["ç¾","å®Ÿ","å…‰"], "ãƒ ":["å¤¢","æ­¦"],
  "ãƒ¡":["èŠ½","æ˜"], "ãƒ¢":["å®ˆ","èŒ","æœ›"],
  "ãƒ¤":["ä¹Ÿ","çŸ¢","å¼¥"], "ãƒ¦":["å„ª","ç¥"], "ãƒ¨":["é™½","ä¸–","è€€"],
  "ãƒ©":["æ¥","è˜­","è‰¯"], "ãƒª":["ç†","ç’ƒ","è‰"], "ãƒ«":["æµ","ç•™"],
  "ãƒ¬":["ç¤¼","éº—","ç²"], "ãƒ­":["æœ—","è·¯","ç‚‰"],
  "ãƒ¯":["å’Œ","ç’°","ç¾½"], "ãƒ³":["éŸ³","æ©"]
};
const kanjiMeaning = {
  "æ„›":"love","æ—­":"rising sun","æ˜":"bright","æ³‰":"spring","é™½":"sun",
  "ä¸€":"one","ç¾½":"wing","å®‡":"universe","å„ª":"gentle","æ „":"glory",
  "æµ":"blessing","è‹±":"brave","æ¡œ":"cherry","æ—º":"prosper",
  "éŸ³":"sound","ä½³":"excellent","å˜‰":"auspicious","é¦™":"fragrant",
  "è¼":"shine","å¸Œ":"hope","å‰":"good fortune","ç©º":"sky","ä¹…":"long-lasting",
  "åŠŸ":"achievement","æ™¯":"scenery","æ…¶":"celebration","å…‰":"light",
  "æ¹–":"lake","å¹¸":"happiness","å’²":"bloom","ç´—":"gauze","å½©":"color",
  "å¿—":"will","è©©":"poem","ç´«":"purple","æ¾„":"clear","æ –":"nest","å‘¨":"cycle",
  "è–":"holy","æ™´":"clear","ä¸–":"world","è’¼":"blue","çˆ½":"fresh","å¥":"play",
  "å¤ª":"great","é”":"accomplish","æ‹“":"open","æ™º":"wisdom","åƒ":"thousand",
  "æ²»":"govern","ç¿¼":"wing","æ´¥":"haven","é¼“":"drum","å¤©":"sky","ç…§":"shine",
  "ç¦":"good omen","ç™»":"rise","æ–—":"dipper","ç¿”":"soar","å¥ˆ":"grace",
  "èœ":"greens","å’Œ":"harmony","ä»":"benevolence","è™¹":"rainbow","æ–°":"new",
  "ç¸«":"stitch","æ¸©":"warm","éŸ³":"sound","å¯§":"peaceful","æœ›":"hope","é‡":"field",
  "æ³¢":"wave","è‘‰":"leaf","é™½":"sun","é£›":"fly","å§«":"princess","é¢¨":"wind",
  "å¯Œ":"wealth","ç¦":"fortune","ç¢§":"blue-green","è¾º":"edge","ç©‚":"ear (grain)",
  "å®":"treasure","èŠ³":"fragrant","çœŸ":"true","èˆ":"dance","ä¸‡":"many",
  "ç¾":"beauty","å®Ÿ":"real","å…‰":"light","å¤¢":"dream","æ­¦":"brave",
  "èŠ½":"bud","å®ˆ":"protect","èŒ":"sprout","ä¹Ÿ":"also","çŸ¢":"arrow","å¼¥":"ever more",
  "å„ª":"gentle","ç¥":"help","è€€":"shine","æ¥":"come","è˜­":"orchid","è‰¯":"good",
  "ç†":"logic","ç’ƒ":"lapis","è‰":"jasmine","æµ":"flow","ç•™":"stay",
  "ç¤¼":"courtesy","éº—":"lovely","ç²":"tinkle","æœ—":"clear","è·¯":"road","ç‚‰":"hearth",
  "ç’°":"ring","ç¾½":"feather","æ©":"grace"
};

/* ===== Helpers ===== */
function hash(s){ let h=2166136261>>>0; for(const ch of s) { h^=ch.charCodeAt(0); h=Math.imul(h,16777619)>>>0; } return h; }
function pick(arr,seed,i){ return arr[(seed+i)%arr.length]; }

/* ===== Core generator ===== */
function generate(nameRaw){
  const key=nameRaw.trim().toLowerCase();
  if(!key) return null;

  // 1) Dictionary-first
  if(dict[key]){
    const [kanji,kana,roman,desc]=dict[key];
    return {kanji,kana,meanings:desc.split("; ").map(s=>"â€¢ "+s)};
  }

  // 2) Phonetic fallback
  const kana=toKatakana(key);
  // split kana to rough syllables (first char per kana)
  const chars=[...kana].filter(c=>/^[ã‚¡-ãƒ³]$/.test(c)).map(c=>c.toUpperCase());
  const seed=hash(key);
  const outKanji=[];
  const notes=[];
  for(let i=0;i<Math.min(3,Math.max(2,chars.length));i++){
    const base = sylPool[chars[i]] || sylPool["ã‚¢"];
    const k = pick(base, seed, i);
    outKanji.push(k);
    notes.push(`${k} = ${kanjiMeaning[k]||"good"}`);
  }
  return {kanji: outKanji.join(""), kana, meanings: notes.map(n=>"â€¢ "+n)};
}

/* ===== UI wiring ===== */
const $=sel=>document.querySelector(sel);
const examples=["Tom","Ken","Kevin","David","Emma","Sarah","Alex","Liam","Olivia","Lucas","Grace","Isabella"];
$("#examples").innerHTML=examples.map(n=>`<span class="chip" data-n="${n}">${n}</span>`).join("");
$("#examples").addEventListener("click",e=>{const n=e.target.dataset.n;if(n){$("#name").value=n; run();}});

function run(){
  const name=$("#name").value;
  const res=generate(name);
  const out=$("#out");
  if(!res){ out.style.display="none"; return; }
  $("#kanji").textContent=res.kanji;
  $("#kana").textContent = `kana: ${toKatakana(name)}`;
  $("#meanings").innerHTML = `<strong>Meanings</strong><br>${res.meanings.join("<br>")}`;
  out.style.display="";
}
$("#go").addEventListener("click",run);
$("#name").addEventListener("keydown",e=>{ if(e.key==="Enter") run(); });

$("#copyBtn").addEventListener("click",async ()=>{
  const t = `${$("#kanji").textContent} (${$("#kana").textContent.replace("kana: ","")})`;
  try{ await navigator.clipboard.writeText(t); toast("Copied"); }catch{}
});
$("#shareBtn").addEventListener("click",async ()=>{
  const t = `${$("#kanji").textContent} â€” ${$("#meanings").innerText}`;
  if(navigator.share){ try{ await navigator.share({title:"WAMEI",text:t}); }catch{} }
  else{ await navigator.clipboard.writeText(t); toast("Copied link text"); }
});
function toast(msg){
  const el=document.createElement("div");
  el.textContent=msg; el.style.cssText="position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:#4ade80;color:#fff;padding:10px 16px;border-radius:999px;font-weight:700";
  document.body.appendChild(el); setTimeout(()=>el.remove(),1400);
}
</script>
</body>
</html>
